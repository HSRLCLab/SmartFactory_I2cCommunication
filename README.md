# SmartFactory_I2cCommunication

The i2c interface is a serial data bus to connect low speed devices. The data is transmitted via two wires, one being the clock line and the other being the data line. The i2c interface is based on the master-slave principle, whereby the master can push and pull messages to the slave. It is also possible to have more than one master in a system. The slave is identified by its address. Is a microcontroller as slave needed the address can be freely defined, if no other slave has this address. 
In the SmartFactory project, data is exchanged between the SorticRobot and the SorticRobot CommunicationHub via the i2c interface. Predefined structs are sent and received byte by byte. This enables a simple data exchange amongst linked systems.

## Table of contents

- Tools and technologies
   - Visual Studi Code
   - Doxygen
   - I2C
- Hardware
   - Logic Level converter
- Software
   - I2C
   - UML
   - Dependency Graph
   - Collaboration Diagram
- ToDo's
- Contributors
- Changelog
- License
- Links to SmartFactory

## Tools and technologies

The source code is implemented in the programming language C++. In the following, the tools for editing the project are listed.

#### Visual Studio Code
The development environment used is [Visual Studio Code](https://code.visualstudio.com/) with the [PlatformIO extension](https://docs.platformio.org/en/latest/ide/vscode.html). The development environment can be downloaded open sourced. For an installation guide look [here](https://github.com/philipzellweger/SmartFactory_I2cCommunication/blob/master/docs/Installation_Guide_SmartFactory.pdf).  

#### Doxygen
Doxygen was used for documenting the source code. For using Doxygen in Visual Studio code, the [Doxygen Documentation Generator](https://marketplace.visualstudio.com/items?itemName=cschlosser.doxdocgen) extension is available.

#### I2C

The binary signals for the i2c communication are generated by pull-up resistors. The clock line gives a time-delayed periodic square wave signal, which defines the clock of the transmission. The data bits are transmitted by a time-delayed aperiodic square-wave signal on the data line. For a more detailed explanation [here](http://www.circuitbasics.com/basics-of-the-i2c-communication-protocol/).

![i2c](http://www.circuitbasics.com/wp-content/uploads/2016/01/Introduction-to-I2C-Data-Transmission-Diagram-ADDRESS-FRAME-2.png)
[Image: [Circuit Base: I2C COMMUNICATION PROTOCOLL](http://www.circuitbasics.com/basics-of-the-i2c-communication-protocol/)]

## Hardware

#### Logic Level converter

A logic level converter is used to transform the different voltages of the binary signals. An explanation of the Logic Level converter can be found [here](https://www.instructables.com/id/A-Quick-Guide-on-Logic-Level-Shifting/).

![converter](https://cdn-shop.adafruit.com/1200x900/757-03.jpg)
[Image: [Adafruit: LOGIC LEVEL CONVERTER](https://www.adafruit.com/product/757)

## Software

#### I2C

The i2c interface was implemented with preprocessor instructions for handling as master or slave in the same interface. By uncommenting "#define MASTER" the slave version can be used.
```
// UNCOMMIT IF SLAVE

#define MASTER 
```

#### UML

The figure below shows the data model in UML notation. 

<p align="center">
    <a href=https://github.com/philipzellweger/SmartFactory_I2cCommunication/blob/master/docs/html/class_i2c_communication.html>
        <img src="https://github.com/philipzellweger/SmartFactory_I2cCommunication/blob/master/docs/html/class_i2c_communication__coll__graph.png" style="border:none;"/>
    </a>
    <p align="center"><small>Click on the image to open doxygen-documentation.</p>
</p>

#### Includes

The figure below shows the include graph

<p align="center">
    <a href=https://github.com/philipzellweger/SmartFactory_I2cCommunication/blob/master/docs/html/_i2c_communication_8h.html>
        <img src="https://github.com/philipzellweger/SmartFactory_I2cCommunication/blob/master/docs/html/_i2c_communication_8h__incl.png" style="border:none;"/>
    </a>
    <p align="center"><small>Click on the image to open doxygen-documentation.</p>
</p>

## ToDo's
- [ ]
- [ ]

# Contributors
- [Philip Zellweger](https://github.com/philipzellweger)

# Changelog

V 1.0   -	Release SA HS20 -	[Philip Zellweger](https://github.com/philipzellweger)

# License

MIT License

# Links to SmartFactory
- [SmartFactory-Sortic](https://github.com/LMazzole/SmartFactory-Sortic)
- [SmartFactory_Box-Sortic](https://github.com/LMazzole/SmartFactory_Box-Sortic)
- [SmartFactory_Vehicle-Sortic](https://github.com/LMazzole/SmartFactory_Vehicle-Sortic)
- [SmartFactory_Vehicle-Basis](https://github.com/LMazzole/SmartFactory_Vehicle-Basis)
- [SmartFactory_SorticRoboter](https://github.com/philipzellweger/SmartFactory_SorticRoboter)
- [SmartFactory_SorticRoboter_CommunicationHub](https://github.com/philipzellweger/SmartFactory_SorticRoboter_CommunicationHub)
- [SmartFactory_MQTTCommunication](https://github.com/LMazzole/SmartFactory_MQTTCommunication) for Adafruit Feather M0 Wifi
- [SmartFactory_MQTTCommunication](https://github.com/philipzellweger/SmartFactory_MQTTCommunication) for Esp32 DevKitC
- [SmartFactory_I2cCommunication](https://github.com/philipzellweger/SmartFactory_I2cCommunication)
- [SmartFactory_Messages](https://github.com/philipzellweger/SmartFactory_Messages)
